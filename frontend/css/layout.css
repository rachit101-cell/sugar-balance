/* ═══════════════════════════════════════════════
   LAYOUT — GRID, FLEX, SPACING, PAGE STRUCTURE
   ═══════════════════════════════════════════════ */

/* ── Page background ── */
.app-bg {
  min-height: 100vh;
  background: linear-gradient(135deg, #FFF8F0 0%, #F5E8FF 35%, #E8F5FF 70%, #E8FFF5 100%);
  position: relative;
}
.app-bg::before {
  content: '';
  position: fixed; inset: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 700px 500px at 15% 20%, rgba(232,213,245,0.4) 0%, transparent 70%),
    radial-gradient(ellipse 600px 400px at 85% 80%, rgba(200,232,255,0.4) 0%, transparent 70%),
    radial-gradient(ellipse 500px 300px at 50% 50%, rgba(200,240,224,0.25) 0%, transparent 70%);
}

/* ── Navbar ── */
#navbar {
  position: fixed; top: 0; left: 0; right: 0; z-index: var(--z-nav);
  height: 70px; padding: 0 clamp(16px,3vw,40px);
  display: flex; align-items: center; justify-content: space-between;
  background: rgba(255,248,240,0.72);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border-bottom: 1.5px solid rgba(255,255,255,0.7);
  box-shadow: 0 4px 24px rgba(180,120,200,0.1);
  transition: var(--t-normal);
}

/* ── Page sections ── */
.page {
  display: none; min-height: 100vh;
  padding: 90px clamp(16px,4vw,60px) 60px;
  position: relative; z-index: var(--z-base);
}
.page.active { display: block; }

/* ── Container ── */
.container { max-width: 1100px; margin: 0 auto; }
.container-sm { max-width: 680px; margin: 0 auto; }

/* ── Grid systems ── */
.grid-2 { display: grid; grid-template-columns: repeat(2,1fr);       gap: var(--gap-md); }
.grid-3 { display: grid; grid-template-columns: repeat(3,1fr);       gap: var(--gap-md); }
.grid-4 { display: grid; grid-template-columns: repeat(4,1fr);       gap: var(--gap-md); }
.grid-auto { display: grid; grid-template-columns: repeat(auto-fill,minmax(200px,1fr)); gap: var(--gap-md); }
.grid-food  { display: grid; grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); gap: var(--gap-md); }
.grid-stats { display: grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap: var(--gap-md); }

/* ── Flex helpers ── */
.flex         { display: flex; }
.flex-center  { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.flex-wrap    { flex-wrap: wrap; }
.gap-xs       { gap: var(--gap-xs); }
.gap-sm       { gap: var(--gap-sm); }
.gap-md       { gap: var(--gap-md); }
.gap-lg       { gap: var(--gap-lg); }

/* ── Spacing ── */
.mt-8  { margin-top:  8px; } .mb-8  { margin-bottom:  8px; }
.mt-16 { margin-top: 16px; } .mb-16 { margin-bottom: 16px; }
.mt-24 { margin-top: 24px; } .mb-24 { margin-bottom: 24px; }
.mt-40 { margin-top: 40px; } .mb-40 { margin-bottom: 40px; }

/* ── Text ── */
.text-center { text-align: center; }
.text-right  { text-align: right; }
.text-sm     { font-size: 0.82rem; }
.text-xs     { font-size: 0.72rem; }
.text-muted  { color: #9B71C2; }
.text-accent { color: var(--violet); font-family: var(--font-serif); font-style: italic; }

/* ── Overflow helpers ── */
.overflow-x { overflow-x: auto; scrollbar-width: none; }
.overflow-x::-webkit-scrollbar { display: none; }

/* ── Profile panel overlay ── */
#profilePanel {
  position: fixed; top: 0; right: -420px; width: 380px; height: 100vh;
  z-index: var(--z-panel); overflow-y: auto;
  padding: 80px 24px 40px;
  transition: right 0.4s cubic-bezier(0.4,0,0.2,1);
}
#profilePanel.open { right: 0; box-shadow: -8px 0 60px rgba(150,80,200,0.15); }

#panelBackdrop {
  position: fixed; inset: 0; z-index: calc(var(--z-panel) - 10);
  background: rgba(60,20,80,0.25); backdrop-filter: blur(4px);
  display: none;
}
#panelBackdrop.open { display: block; }

/* ── Modal / Popup ── */
.modal-overlay {
  position: fixed; inset: 0; z-index: var(--z-popup);
  display: none; align-items: center; justify-content: center;
  background: rgba(60,30,80,0.35); backdrop-filter: blur(8px);
  padding: 20px;
}
.modal-overlay.open { display: flex; }
.modal-card { width: min(480px,100%); border-radius: var(--r-xl); padding: 40px; }

/* ── Chart wrappers ── */
.chart-wrap { position: relative; height: 220px; }
.chart-wrap-sm { position: relative; height: 140px; }

/* ── Streak calendar ── */
.streak-cal { display: grid; grid-template-columns: repeat(7,1fr); gap: 5px; }
.cal-day {
  aspect-ratio: 1; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.7rem; font-weight: 600;
  background: rgba(200,200,220,0.2); border: 1px solid rgba(200,200,220,0.3); color: #9B71C2;
}
.cal-day.done  { background: linear-gradient(135deg, var(--violet), var(--teal)); color: white; border-color: transparent; animation: calHighlight 0.4s var(--t-bounce); }
.cal-day.today { border: 2px solid var(--coral); }
